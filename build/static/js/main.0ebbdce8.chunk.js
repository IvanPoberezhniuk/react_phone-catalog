(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(19),r=a.n(l),o=(a(29),a(7)),s=c.a.createContext(),m=function(){var e=Object(n.useContext)(s);return c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:"img/basket_icon.svg",alt:"Basket",className:"basket"}),c.a.createElement("div",{className:"basket__count"},e.totalCount))},u=a(2),i=function(){return c.a.createElement("header",null,c.a.createElement("nav",{className:"header-nav"},c.a.createElement("ul",{className:"header-nav__list"},c.a.createElement("li",{className:"header-nav__li"},c.a.createElement(u.c,{exact:!0,to:"/",activeClassName:"header-nav__li-active",className:"header-nav__link"},"Home")),c.a.createElement("li",{className:"header-nav__li"},c.a.createElement(u.c,{to:"/phones",activeClassName:"header-nav__li-active",className:"header-nav__link"},"Phones")),c.a.createElement("li",{className:"header-nav__li"},c.a.createElement(u.c,{to:"/fake",activeClassName:"header-nav__li-active",className:"header-nav__link"},"Fake")),c.a.createElement("li",{className:"header-nav__li"},c.a.createElement(u.c,{to:"/fake1/qqq/1233/12222/",activeClassName:"header-nav__li-active",className:"header-nav__link"},"Fake")),c.a.createElement("li",{className:"header-nav__li"},c.a.createElement(u.c,{to:"/basket",activeClassName:"header-nav__li-active",className:"header-nav__link"},c.a.createElement(m,{to:"/basket"}))))))},E=function(){return c.a.createElement("div",{className:"home-page"},c.a.createElement("h1",null,"Welcome To Home Page ",c.a.createElement("br",null),c.a.createElement(u.b,{to:"/phones",className:"show-phones"},"Show Phones")))},d=a(3),p=function(){return c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))},h=function(e){var t=e.phone;return c.a.createElement(s.Consumer,null,function(e){return c.a.createElement("button",{type:"button",onClick:function(){return e.addItemToBasket(t)},className:"button-buy"},"Buy")})},b=function(e){var t=e.phone,a=t.id,n=t.imageUrl,l=t.name,r=t.snippet;return c.a.createElement("article",{className:"item"},c.a.createElement("div",null,c.a.createElement(u.b,{to:"phones/".concat(a)},c.a.createElement("img",{src:n,alt:"",className:"item__img"}),c.a.createElement("div",{className:"item__title"},l),c.a.createElement("div",{className:"item__description"},r))),c.a.createElement(h,{phone:t}))},f=a(10),v="NEWEST",_="ASC",N=function(e){var t=e.setSortType,a=e.setSearchFieldValue,n=Object(f.debounce)(function(e){var t=e.target.value.toLowerCase().replace(/(\s)/gm,"");a(t)},333);return c.a.createElement("div",{className:"filter"},c.a.createElement("input",{type:"search",name:"serchPhones",className:"filter__search-field",placeholder:"Search",autoComplete:"off",onChange:function(e){return function(e){e.persist(),n(e)}(e)}}),c.a.createElement("select",{name:"direction",className:"filter__direction",onChange:function(e){return t(e.target.value)}},c.a.createElement("option",{value:_},"A-z"),c.a.createElement("option",{value:v},"Newest")))},k="NEWEST",j="ASC",g=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),o=Object(d.a)(r,2),s=o[0],m=o[1],u=Object(n.useState)(!1),i=Object(d.a)(u,2),E=(i[0],i[1]),h=Object(n.useState)(""),v=Object(d.a)(h,2),_=v[0],g=v[1],O=Object(n.useState)(j),y=Object(d.a)(O,2),C=y[0],S=y[1];Object(n.useEffect)(function(){fetch("".concat("https://mate-academy.github.io","/phone-catalogue-static/api/phones.json")).then(function(e){return e.json()}).then(function(e){try{l(e),m(!0)}catch(t){E(!0)}})},[]);var w=Object(n.useMemo)(function(){return function(e,t){return t?e.filter(function(e){return e.name.replace(/(\s)/gm,"").toLowerCase().includes(t)}):e}(a,_)},[a,_]),B=Object(n.useMemo)(function(){return function(e,t){switch(t){case k:return Object(f.sortBy)(e,[function(e){return e.age}]);case j:return Object(f.sortBy)(e,[function(e){return e.name}]);default:return e}}(w,C)},[w,C]);return c.a.createElement("div",{className:"phones__wrapper"},c.a.createElement(N,{phones:a,setPhones:l,setSortType:S,setSearchFieldValue:g}),s?c.a.createElement("div",{className:"phones"},B.map(function(e){return c.a.createElement(b,{key:e.id,phone:e})})):c.a.createElement(p,null))},O=Object(o.f)(function(e){var t=e.location;return c.a.createElement("div",{className:"notFound"},c.a.createElement("h1",null,"404 NotFound"),c.a.createElement("h2",null,t.pathname))}),y=a(15),C=a.n(y),S=a(22),w=function(e){var t=e.match,a=Object(n.useState)(null),l=Object(d.a)(a,2),r=l[0],o=l[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),u=m[0],i=m[1],E=Object(n.useState)(!1),b=Object(d.a)(E,2),f=b[0],v=b[1],_=Object(n.useState)(0),N=Object(d.a)(_,2),k=N[0],j=N[1],g=t.params.phoneId;return Object(n.useEffect)(function(){!function(){var e=Object(S.a)(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones/".concat(g,".json"));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,o(a),v(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i(!0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}()()},[g]),u?c.a.createElement(O,null):c.a.createElement(c.a.Fragment,null,console.log(r),f?c.a.createElement("div",{className:"details"},c.a.createElement("section",{className:"phone"},c.a.createElement("img",{src:r.images[k],alt:r.name,className:"phone__main-img"}),c.a.createElement("h1",{className:"phone__title"},r.name),c.a.createElement("p",{className:"phone__description"},r.description),c.a.createElement("div",{className:"thumb"},r.images.map(function(e,t){return c.a.createElement("img",{src:e,alt:e,className:"thumb__img",key:e,onClick:function(){return j(t)}})})),c.a.createElement(h,{phone:r}))):c.a.createElement(p,null))},B=function(){var e=Object(n.useContext)(s);return c.a.createElement(c.a.Fragment,null,e.totalCount?c.a.createElement("table",{className:"basket-table"},c.a.createElement("tbody",null,e.itemsInBasket.map(function(t,a){return c.a.createElement("tr",{className:"basket-table__item",key:t.id},c.a.createElement("td",null,a+1),c.a.createElement("td",null,c.a.createElement(u.b,{to:"/phones/".concat(t.id),className:"basket-table__link-to-item "},c.a.createElement("img",{src:t.imageUrl,alt:t.name,className:"basket-table__img"}))),c.a.createElement("td",null,c.a.createElement(u.b,{to:"/phones/".concat(t.id),className:"basket-table__link-to-item "},t.name)),c.a.createElement("td",{className:"basket-table__count-cell"},c.a.createElement("button",{type:"button",className:"myFancyButton",onClick:function(){return e.decreaseCount(t.id)}},"-"),c.a.createElement("div",null,t.count),c.a.createElement("button",{type:"button",className:"myFancyButton",onClick:function(){return e.increaseCount(t.id)}},"+")),c.a.createElement("td",null,c.a.createElement("button",{type:"button",className:"myFancyButton myFancyButton--warning",onClick:function(){return e.removeFromBasket(t.id)}},"X")))}))):c.a.createElement("p",{className:"basket__empty"},"Empty"))},F=a(23),x=a(16),I=function(e,t){localStorage.setItem(e,JSON.stringify(t))},T=function(e){var t=Object(n.useState)(0),a=Object(d.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)([]),m=Object(d.a)(o,2),u=m[0],i=m[1];Object(n.useEffect)(function(){var e=JSON.parse(window.localStorage.getItem("basketLocalStorage"));e?(r(e.totalCount),i(e.itemsInBasket)):(r(0),i([]))},[]),Object(n.useEffect)(function(){I("basketLocalStorage",{totalCount:l,itemsInBasket:u})});return c.a.createElement(s.Provider,{value:{itemsInBasket:u,totalCount:l,addItemToBasket:function(e){var t=u.some(function(t){return t.id===e.id});i(t?u.map(function(t){return t.id===e.id?(t.count++,Object(x.a)({},t,{count:t.count++})):t}):[].concat(Object(F.a)(u),[Object(x.a)({},e,{count:1})])),r(l+1)},removeFromBasket:function(e){i(u.filter(function(t){return t.id===e?(r(l-t.count),!1):t}))},increaseCount:function(e){i(u.map(function(t){return t.id===e?(t.count++,r(l+1),t):t}))},decreaseCount:function(e){i(u.map(function(t){return t.id===e&&1!==t.count?(t.count=t.count-1,r(l-1),t):t}))}}},e.children)},P=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(T,null,c.a.createElement(i,null),c.a.createElement("main",null,c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",component:E}),c.a.createElement(o.a,{exact:!0,path:"/phones/",component:g}),c.a.createElement(o.a,{exact:!0,path:"/phones/:phoneId",component:w}),c.a.createElement(o.a,{path:"/basket",component:B}),c.a.createElement(o.a,{component:O})))))};r.a.render(c.a.createElement(u.a,null,c.a.createElement(P,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.0ebbdce8.chunk.js.map